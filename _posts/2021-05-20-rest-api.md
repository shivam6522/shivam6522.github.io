---
title: Django Rest API similar to Pastebin
date: 2021-05-20 11:20:20 +0530
# categories: [TOP_CATEGORIE, SUB_CATEGORIE]
categories: [ALL_PROJECTS]
tags: rest_api      # TAG names should always be lowercase
---


## Introduction

- Created a Browsable API which let user’s share their code or any other text by creating snippets using the API. Additionally users have all the CRUD functionality with object level permission management and can changefew aesthetics.•Tech stack - django, django-rest framework, python

## Features and Components

- MVT design pattern
    - In actual it resembles MVC the only diffrence is that Controller in MVC is equivalent to `views` in Django and views in MVC is equivalent to `templates` in Django.
    - In other words it's Acronym corresponding to **MVC** can be perceived as **MTV**.
- Serialization
    - first model instance is translated into python native data types like dict 
    - then the python data is formatted and rendered using JSON
    - finally rendered output is displayed using views.
- Deseralization
    - first we parse the user input string to python native data types
    - and then we convert them to fully populated object instance.
- CSRF token
    - used to check if the request is from a legitimate and authorised client.
- Request objects
    - similar to http request with some added functionlity.
    - request.POST - only works with POST method
    - request.data - works for POST, PUT and PATCH methods.
    - it can handle many formats of input data.
- Response objects
    - it's type of a template response.
    - renders correct content type as requested by the client for e.g(JSON type).
    - can reder response in many formats like html, JSON etc.
- Wrappers
    - decorators @api_view used with function based views.
    - class APIVIEW used with class based views.
    - these provide additional functions like handling parse error exception and adding context to response for content negotiaton
- Adding fomat suffix to urls
    - urls can be used to retive data in different formats by providing different header content type in command line
    - http://127.0.0.1:8000/snippets.json  # JSON suffix
    - http://127.0.0.1:8000/snippets.api   # Browsable API suffix
- Function based views
    - we use functions to define views
- Class based views
    - it lets us reuse some common functionalities
    - one of the major benefit of this is we can use mixins and generic views etc.
    - **Mixins**
        - since all major CRUD  operations are same in all model backed APIs those are already implemented by rest framework's mixin classes
        - we use one generic class to provide core functionalities and use mixins each for create(), update(), retrive(), delete(), list() operations.
    - **Generic view**
        - it's like God of all views
        - rest framework provides some genric views with already mixed-in views like generics.ListCreateAPIView
        - it makes our code for views.py very little and clean
- Authentication and permissions
    - Code snippets are always associated with a creator.
        - crete a owner field in model and add auth.user (default auth model of django) as foreign key of this field and relate it with snippet
        - add snippet list and details views for users to get the associated snippets with their id.
    - Only authenticated users may create snippets.
        - create a serializer class for user model with snippet model data as it's field because snippet is not related directly to user although reverse is true
    - Only the creator of a snippet may update or delete it.
        - associate snippets with user automatically by modyfying create() function of serializer and add owner username in snippet details
    - Unauthenticated requests should have full read-only access. 
        - using rest framework permissons module we can associate permissons to views like `IsAuthenticatedOrReadOnly` will permit read write to autheticated users and only read access to others.
    - object level permissions 
        - if the requested user is owner then we provide him edit access otherwise read-only access
        - for this we create a custom permission class and add it to our `SnippetDetail` view class's permissions property
    - login and logout views
        - add login url by including this in your urlpatterns - path('api-auth/', include('rest_framework.urls'))
    - authentcation
        - by default `SessionAuthentication` and `BasicAuthentication` is used when API is accessed through browser
        - if you access it through terminal or programmatically you need to provide authentication credentials on each request.
- **start with tutorial 5**
- snippet highlighting (highlight syntax)
    - create a highlight field in model which also contains code snippet apart from raw code snippet field
    - use pygments library for this and style field of your model
- used http response codes 
    - rest framework uses error codes with detail like  404_bad_request so that we don't use wrong code by mistake

    - 1xx - informational respons 
        - 100 - continue, everything is ok client should continue the request
    - 2xx - successful responses
        - 200 - ok request has succeeded
    - 3xx - redirect to different server
        - 300 - request has more than one possible response
        - 301 - requested resourse has moved permanently 
    - 4xx - client side error
        - 400 - bad request
        - 404 - requested resource not found
    - 5xx - server side error
        - 500 - internal server error
        - 503 - service unavailable


## Tools and Technologies Used
* Django
    * Development framework
* Django-rest-framework
    * The complete package to develop an API
* Python
    * programming language used to implement logic

## Links
* [github](https://github.com/shivam6522/Nodejs-authentication-system)
